build:
  gpu: true
  cuda: "12.1"
  python_version: "3.10"
  
  # Use the same base as working setup
  system_packages:
    - "libsndfile1"
    - "ffmpeg" 
    - "git"
    - "build-essential"
  
  # Install NeMo first, then other packages
  run:
    - "git clone https://github.com/AI4Bharat/NeMo.git /tmp/nemo"
    - "cd /tmp/nemo && git checkout nemo-v2"
    - "cd /tmp/nemo && pip install --no-cache-dir -e .[asr]"
  
  python_packages:
    - "soundfile"
    - "numpy"
    - "huggingface-hub"
    - "librosa"

predict: "predict.py:Predictor"
image: "r8.im/maltosee/vaak-asr"
